<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Ajax Send Query Param</title>
   </head>
   <body>
      <form>
         <label for="username">
            Username :
            <input type="text" id="username" name="username" />
         </label>
         <br />
         <label for="password">
            Password :
            <input type="password" id="password" name="password" />
         </label>
         <br />
         <input type="button" id="login" value="Login" />
      </form>
      <h1 id="response"></h1>
      <script>
            function doLogin(){
            // Membuat instance baru dari XMLHttpRequest untuk melakukan permintaan AJAX
            const ajax = new XMLHttpRequest();

            // Membuka koneksi POST ke URL yang disediakan
            ajax.open("POST", `https://fajar.free.beeceptor.com`);

            // Event handler yang dijalankan ketika server memberikan respons
            ajax.onload = function(){
               // Mendapatkan elemen HTML dengan id "response" untuk menampilkan respons dari server
               const response = document.getElementById("response");

               // Menampilkan teks respons dari server ke dalam elemen HTML
               response.innerText = ajax.responseText;
            };

            // Menyetel header Content-Type agar data dikirim dalam format URL encoded
            ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

            // Membuat objek URLSearchParams untuk mengumpulkan data dari form
            const form = new URLSearchParams();

            // Menambahkan data dari input form ke dalam objek URLSearchParams
            form.append("username", document.getElementById("username").value); // Menambahkan username
            form.append("password", document.getElementById("password").value); // Menambahkan password

            // Mengirim permintaan AJAX dengan data form yang telah di-encode ke format URL
            ajax.send(form);
         }

         // Menambahkan event handler pada tombol dengan id "login"
         // Saat tombol diklik, fungsi doLogin akan dipanggil
         document.getElementById("login").onclick = doLogin;
      </script>
   </body>
</html>
